<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Dental system</title>
  <link rel="icon" type="image/x-icon" href="WeChat Image_20241105110447.jpg">
 
  <!-- Local Bootstrap CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/bootstrap-theme.min.css" rel="stylesheet">

  <!-- Local Font Awesome -->
  <link href="css/all.min.css" rel="stylesheet">  
  
  <style>
    body {
      padding-top: 70px;  /* Adjusts for the navbar height */
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .navbar {
      margin-bottom: 20px;
    }
    .tab-content {
      padding: 20px;
      border: 1px solid #ddd;
      border-top: none;
    }
    .tab-pane {
      min-height: 200px; /* Minimum height for each content section */
    }
    /* Style for the toggle button */
    .navbar-toggle-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 1050;
    }
    /* CSS for rotation of the arrow */
    .arrow-icon {
      transition: transform 0.3s ease; /* Smooth transition for rotation */
    }
    .rotate {
      transform: rotate(180deg); /* Rotate the arrow when navbar is visible */
    }
    .button-container {
        display: grid;
        gap: 8px;
        margin: 20px 0; /* Align to the left */
        max-width: 400px;
        
    }
    .button {
        /* Other button styles here */
        transition: visibility 0.3s ease; /* Optional: smooth transition for visibility change */
        font-size: 80%;
        padding: 6px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        border: 2px solid #555;
        background-color: #f0f0f0;
    }
    .null-button {
        width: 10px;  /* Or the desired width */
        height: 30px;  /* Or the desired height */
    }
    
    /* Brightness change for clicked buttons */
    .button.clicked {
        filter: brightness(30%); /* Increase brightness */
    }
    .purple-button {
        background-color: #D6B0FF;
        color: black;
        border-color: #8A2BE2;
    }
    .orange-button {
        background-color: #F0B090;
        color: black;
        border-color: #E75B23;
    }
    #buttonContainerQ2 { grid-template-columns: repeat(16, 4fr); }
    #buttonContainerQ3 { grid-template-columns: repeat(16, 4fr); }
    #buttonContainerQ4 { grid-template-columns: repeat(16, 4fr); }
    #buttonContainerQ5 { grid-template-columns: repeat(16, 4fr); }
    #buttonContainerQ6 { grid-template-columns: repeat(16, 4fr); }
    #buttonContainerQ7 { grid-template-columns: repeat(16, 4fr); }
    #buttonContainerQ8 { grid-template-columns: repeat(16, 4fr); }
    .child-buttons { grid-template-columns: repeat(16, 2fr); }
    .adult-buttons { grid-template-columns: repeat(16, 2fr); }
    .teenager-buttons { grid-template-columns: repeat(16, 4fr); }
    .hidden {
        display: none !important;    
     
    }
    table {
        width: 80vh;
        border-collapse: collapse;
        margin-bottom: 20px;
        margin: 0 auto; /* Centers the table */
    }
    th, td {
        border: 1px solid #ccc;
        padding: 10px;
        text-align: center;
    }
    th {
        background-color: #f4f4f4;
    }
    .hidden-row {
        display: none;
    }
    .button-group {
        margin-bottom: 20px;
    }
    .table-container {
        position: fixed;
        top: 30vh;
        bottom: 10vh;
        left: 16vh;
        right: 16vh;
        overflow: auto;
        background-color: #fff;
    }

    #tabletab3 {
        width: 100%;
        border-collapse: collapse;
    }

    #tabletab3 th, #tabletab3 td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
        min-width: 15vh; /* Adjust for wider cells */
    }

    #tabletab3 th {
        background-color: #f4f4f4;
    }

    #tabletab4 th {
        background-color: #f4f4f4;
    }

    #tabletab4 th, #tabletab4 td {
        width: 33%;
        text-align: left;
      }

    #printButton {
        position: fixed; /* Position relative to viewport */
        bottom: 0.5vh; /* Adjust placement to avoid overlap */
        right: 16vh; /* Align with the table container */
        padding: 10px 20px;
        font-size: 16px;
        background-color: #3498db;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: filter 0.3s ease; /* Smooth transition for brightness */
        z-index: 1000; /* Ensure it appears above other elements */
    }

    #printButton:active {
        filter: brightness(70%);
    }

    #printButton:hover {
        background-color: #2980b9;
    }


  </style>
</head>
<body>
  <!-- Toggle Button and Title (Fixed Position) -->
  <button id="toggleNavbar" class="btn btn-default navbar-toggle-btn">
    <i id="arrowIcon" class="fas fa-chevron-down arrow-icon"></i>
  </button>
  <div id="pageTitle" style="text-align: center; padding: 10px;">
  </div>

  <!-- Navbar -->
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Smart Dental System</a>
      </div>
      <ul class="nav navbar-nav">
        <li class="active"><a href="#tab1" data-toggle="tab">Tooth condition setup</a></li>
        <li><a href="#tab2" data-toggle="tab">Disease detail input</a></li>
        <li><a href="#tab3" data-toggle="tab">Information checking</a></li>
        <li><a href="#tab4" data-toggle="tab">Read & Analysis</a></li>
        <li><a href="#tab5" data-toggle="tab">Download/Upload</a></li>
        <li><a href="#tab6" data-toggle="tab">Contact & Reference</a></li>
      </ul>
    </div>
  </nav>

  <!-- Tab Content -->
  <div class="container">
    <div class="tab-content">
      <div class="tab-pane fade in active" id="tab1">
        <h3>Choose the tooth base and their basic conditions</h3>
        <!-- Question 1 -->
        <h4>Question 1: Select prefer tooth Group</h4>
        <label><input type="radio" name="ageGroup" value="child"> Deciduous tooth</label>
        <label><input type="radio" name="ageGroup" value="adult"> Permanent tooth</label>
        <label><input type="radio" name="ageGroup" value="teenager"> Deciduous and permanent tooth</label>
        
        <h5>(Deciduous tooth with prefix D ,for example 'D-U-R-I1'; Permanent tooth are prefix free, for example 'U-R-I1')</h5>

        <!-- Question 2 -->
        <div id="question2" >
            <h4>Question 2: Select Missing tooth</h4>
            <div id="buttonContainerQ2" class="button-container"></div>
            <p id="selectedButtonsQ2"></p> <!-- Display selected buttons -->
        </div>

        <!-- Question 3 -->
        <div id="question3" >
            <h4>Question 3. Choose tooth missing alveolar bone</h4>
            <div id="buttonContainerQ3" class="button-container"></div>
            <p id="selectedButtonsQ3"></p> <!-- Display selected buttons -->
        </div>
        
        <!-- Question 4 -->
        <div id="question4" >
            <h4>Question 4. Choose tooth with Carious lesions(C)</h4>
            <div id="buttonContainerQ4" class="button-container"></div>
            <p id="selectedButtonsQ4"></p> <!-- Display selected buttons -->
        </div>
        <!-- Question 5 -->
        <div id="question5" >
            <h4>Question 5. Choose tooth with with Enamel hypoplasia (EH)</h4>
            <div id="buttonContainerQ5" class="button-container"></div>
            <p id="selectedButtonsQ5"></p> <!-- Display selected buttons -->
        </div>
        <!-- Question 6 -->
        <div id="question6" >
            <h4>Question 6. Choose tooth with Periapical lesion (ABS)</h4>
            <div id="buttonContainerQ6" class="button-container"></div>
            <p id="selectedButtonsQ6"></p> <!-- Display selected buttons -->
        </div>
        
        <!-- Question 7 -->
        <div id="question7" >
            <h4>Question 7. Choose tooth with Periodental disease (PER)</h4>
            <div id="buttonContainerQ7" class="button-container"></div>
            <p id="selectedButtonsQ7"></p> <!-- Display selected buttons -->
        </div>        
        <!-- Question 8 -->
        <div id="question8" >
            <h4>Question 8. Choose tooth with Dental caculus (DC)</h4>
            <div id="buttonContainerQ8" class="button-container"></div>
            <p id="selectedButtonsQ8"></p> <!-- Display selected buttons -->
        </div>   
      </div>
      <!--tab2 DOM-->
      <div class="tab-pane fade" id="tab2">
        <h3>Carious lesions(C)</h3>
        <table id="tableQ4">
            <thead>
                <tr>
                    <th>Tooth</th>
                    <th>Size and location</th>
                    <th>Grade</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows for Table 1 will be dynamically added here -->
            </tbody>
        </table>
        <h3>Enamel hypoplasia (EH)</h3>
        <table id="tableQ5">
            <thead>
                <tr>
                    <th>Tooth</th>
                    <th>Size and location</th>
                    <th>Grade</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows for Table 2 will be dynamically added here -->
            </tbody>
        </table>
        <h3>Periapical lesion (ABS)</h3>
        <table id="tableQ6">
            <thead>
                <tr>
                    <th>Tooth</th>
                    <th>Size and location</th>
                    <th>Grade</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows for Table 3 will be dynamically added here -->
            </tbody>
        </table>
        
        <h3>Periodental disease (PER)</h3>
        <table id="tableQ7">
            <thead>
                <tr>
                    <th>Tooth</th>
                    <th>Size and location</th>
                    <th>Grade</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows for Table 4 will be dynamically added here -->
            </tbody>
        </table>

        <h3>Dental caculus (DC)</h3>
        <table id="tableQ8">
            <thead>
                <tr>
                    <th>Tooth</th>
                    <th>Size and location</th>
                    <th>Grade</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows for Table 5 will be dynamically added here -->
            </tbody>
        </table>

      </div>
      <div class="tab-pane fade" id="tab3">
        <h3>Check and quick download</h3>
        <div class="table-container">
            <table id="tabletab3">
                <thead>
                    <tr id="headerRow">
                        <th>Check table</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
        <button id="printButton">Save as csv</button>
      </div>
      
      <div class="tab-pane fade" id="tab4">
        <h3> Analysis </h3>
        <table id="tabletab4" class="table">
            <thead>
                <tr>
                  <th></th>
                  <th>Permanent teeth</th> <!-- second column -->
                  <th>Deciduous teeth</th> <!-- third column -->
                </tr>
              </thead>
            <tbody>
                <tr>
                <td>No of preserved teeth:</td>
                <td>0 (0 % to all)</td> <!-- Permenant -->
                <td>0 (0 % to all)</td> <!-- Deciduous -->
                </tr>
                <td>No of teeth with carious lesions(C):</td>
                <td>0 (0 % to preserved)</td> <!-- Permenant -->
                <td>0 (0 % to preserved)</td> <!-- Deciduous -->
                </tr>
                <tr>
                <td>No of teeth with Enamel hypoplasia(EH):</td>
                <td>0 (0 % to preserved)</td> <!-- Permenant -->
                <td>0 (0 % to preserved)</td> <!-- Deciduous -->
                </tr>
                <tr>
                <td>No of preserved Alveolar Bone:</td>
                <td>0 (0 % to all)</td> <!-- Permenant -->
                <td>0 (0 % to all)</td> <!-- Deciduous -->
                </tr>
                <tr>
                <td>No of teeth with periapical lesions(ABS):</td>
                <td>0 (0 % to preserved)</td> <!-- Permenant -->
                <td>0 (0 % to preserved)</td> <!-- Deciduous -->
                </tr>
                <tr>
                <td>No of teeth with periapical periodontal diseases (PER):</td>
                <td>0 (0 % to preserved)</td> <!-- Permenant -->
                <td>0 (0 % to preserved)</td> <!-- Deciduous -->
                </tr>
                <tr>
                <td>No of teeth with periapical dental calculus(DC):</td>
                <td>0 (0 % to preserved)</td> <!-- Permenant -->
                <td>0 (0 % to preserved)</td> <!-- Deciduous -->
                </tr>
            </tbody>
        </table>

       </div>
          
      <div class="tab-pane fade" id="tab5">
        <h3>Blog</h3>
        <p>In the Blog section, you can add articles, tutorials, or any other blog-style content.</p>
      </div>
      <div class="tab-pane fade" id="tab6">
        <h3>Contact</h3>
        <p>The Contact section provides information on how users can reach you or fill out a contact form.</p>
      </div>
    </div>
  </div>

  <!-- jQuery, Bootstrap JS -->
  
  <!-- Local jQuery -->
  <script src="js/jquery-2.2.4.min.js"></script>

  <!-- Local Bootstrap JS -->
  <script src="js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>



  <script>
    const buttonTemplates = {
        adult: ['U-R-I1','U-R-I2','U-R-C','U-R-P1','U-R-P2','U-R-M1','U-R-M2', 'U-R-M3','U-L-I1','U-L-I2','U-L-C','U-L-P1','U-L-P2','U-L-M1','U-L-M2', 'U-L-M3','L-R-I1','L-R-I2','L-R-C','L-R-P1','L-R-P2','L-R-M1','L-R-M2', 'L-R-M3','L-L-I1','L-L-I2','L-L-C','L-L-P1','L-L-P2','L-L-M1','L-L-M2', 'L-L-M3'], 
        child: [null,null,null, 'D-U-R-I1','D-U-R-I2','D-U-R-C','D-U-R-P1','D-U-R-P2','D-U-L-I1','D-U-L-I2','D-U-L-C','D-U-L-P1','D-U-L-P2', null,null, null,null,null,null, 'D-L-R-I1','D-L-R-I2','D-L-R-C','D-L-R-P1','D-L-R-P2','D-L-L-I1','D-L-L-I2','D-L-L-C','D-L-L-P1','D-L-L-P2', null,null, null],
        teenager: [null,null,null, 'D-U-R-I1','D-U-R-I2','D-U-R-C','D-U-R-P1','D-U-R-P2','D-U-L-I1','D-U-L-I2','D-U-L-C','D-U-L-P1','D-U-L-P2', null,null, null,null,null,null, 'D-L-R-I1','D-L-R-I2','D-L-R-C','D-L-R-P1','D-L-R-P2','D-L-L-I1','D-L-L-I2','D-L-L-C','D-L-L-P1','D-L-L-P2', null,null, null,null, null,null, null,null, null,null, null,null, null,null, null,null, null,null, null,'U-R-I1','U-R-I2','U-R-C','U-R-P1','U-R-P2','U-R-M1','U-R-M2', 'U-R-M3','U-L-I1','U-L-I2','U-L-C','U-L-P1','U-L-P2','U-L-M1','U-L-M2', 'U-L-M3','L-R-I1','L-R-I2','L-R-C','L-R-P1','L-R-P2','L-R-M1','L-R-M2', 'L-R-M3','L-L-I1','L-L-I2','L-L-C','L-L-P1','L-L-P2','L-L-M1','L-L-M2', 'L-L-M3']
    };
    
    const toothtotalTemplates = {
        adult: [32,0],
        child: [0,20],
        teenager: [32,20]
    };

    const ageGroupRadios = document.querySelectorAll('input[name="ageGroup"]');
    const question2 = document.getElementById('question2');
    const question3 = document.getElementById('question3');
    const question4 = document.getElementById('question4');
    const question5 = document.getElementById('question5');
    const question6 = document.getElementById('question6');
    const question7 = document.getElementById('question7');
    const question8 = document.getElementById('question8');
    const buttonContainerQ2 = document.getElementById('buttonContainerQ2');
    const buttonContainerQ3 = document.getElementById('buttonContainerQ3');
    const buttonContainerQ4 = document.getElementById('buttonContainerQ4');
    const buttonContainerQ5 = document.getElementById('buttonContainerQ5');
    const buttonContainerQ6 = document.getElementById('buttonContainerQ6');
    const buttonContainerQ7 = document.getElementById('buttonContainerQ7');
    const buttonContainerQ8 = document.getElementById('buttonContainerQ8');
    const selectedButtonsQ2 = document.getElementById('selectedButtonsQ2');
    const selectedButtonsQ3 = document.getElementById('selectedButtonsQ3');
    const selectedButtonsQ4 = document.getElementById('selectedButtonsQ4');
    const selectedButtonsQ5 = document.getElementById('selectedButtonsQ5');
    const selectedButtonsQ6 = document.getElementById('selectedButtonsQ6');
    const selectedButtonsQ7 = document.getElementById('selectedButtonsQ7');
    const selectedButtonsQ8 = document.getElementById('selectedButtonsQ8');
    // Store clicked button names
    const selectedNames = { Q2: [], Q3: [], Q4: [], Q5: [], Q6: [], Q7: [], Q8: [] };
    //tab3 table gerenation
    const headerRow = document.getElementById('headerRow');
    const tableBody = document.getElementById('tableBody');
    const rowDefinitions = [
    { title: 'Present ?', fill: () => 'P' },
    { title: '', fill: () => '' },
    { title: 'Carries Present', fill: () => 'no' },
    { title: 'Carries Location', fill: () => '/' },
    { title: 'Carries Grade', fill: () => '/' },
    { title: '', fill: () => '' },
    { title: 'EH Present', fill: () => 'no' },
    { title: 'EH Type', fill: () => '/' },
    { title: '', fill: () => '' },
    { title: 'ABS Present', fill: () => 'no' },
    { title: 'ABS Type', fill: () => '/' },
    { title: '', fill: () => '' },
    { title: 'PER Present', fill: () => 'no' },
    { title: 'PER Grade', fill: () => '/' },
    { title: '', fill: () => '' },
    { title: 'DC Present', fill: () => 'no' },
    { title: 'DC Type', fill: () => '/' },
    ];

    function renderButtons(container, ageGroup, selectedDisplay, question) {
        container.innerHTML = '';
        container.classList.remove('child-buttons', 'adult-buttons', 'teenager-buttons');
        container.classList.add(`${ageGroup}-buttons`);
    
        buttonTemplates[ageGroup].forEach(label => {
            if (label !== null) {
                const button = document.createElement('button');
                button.classList.add('button');
                button.textContent = label;
    
                if (label.includes('-R-')) {
                    button.classList.add('purple-button');
                } else if (label.includes('-L-')) {
                    button.classList.add('orange-button');
                }
    
                // Add click event listener
                button.addEventListener('click', () => handleButtonClick(button, label, selectedDisplay, question, ageGroup));
    
                container.appendChild(button);
            } else {
                // If the label is null, create a div with the class 'null-button'
                const nullButton = document.createElement('div');
                nullButton.classList.add('null-button');
                nullButton.style.visibility = 'hidden';  // Make it invisible but keep the space
                container.appendChild(nullButton);
            }
        });
    }
    
    function handleButtonClick(button, label, selectedDisplay, question, ageGroup) {
        const selectedArray = selectedNames[question];
        const ptoothtotal = toothtotalTemplates[ageGroup][0];
        const dtoothtotal = toothtotalTemplates[ageGroup][1];
    
        console.log(`Button clicked: ${label}`);
        console.log(`Initial selected array for ${question}:`, selectedArray);
    
        if (button.classList.toggle('clicked')) {
            selectedArray.push(label);
            console.log(`${label} added to ${question}`);
        } else {
            const index = selectedArray.indexOf(label);
            if (index > -1) {
                selectedArray.splice(index, 1);
                console.log(`${label} removed from ${question}`);
            }
        }
    
        selectedDisplay.textContent = selectedArray.join(' / ');
    
        // Call function to update visibility based on Q2 (affecting Q4 and Q5)
        if (question === 'Q2') {
            toggleQ4Q5Visibility();
            addTable('Q4', selectedNames['Q4']);
            addTable('Q5', selectedNames['Q5']);
            // tab3 table change handle 
            presentProblem(selectedNames['Q2'],selectedNames['Q3']);
            updateTabletab3(2,selectedNames['Q4'], 'yes');
            updateTabletab3(3,selectedNames['Q2'], '/');
            updateTabletab3(4,selectedNames['Q2'], '/');
            updateTabletab3(6,selectedNames['Q5'], 'yes');
            updateTabletab3(7,selectedNames['Q2'], '/');
            //tab4 table change handle 
            analysistable(ptoothtotal,dtoothtotal, selectedNames);
        }
    
        // Call function to update visibility based on Q3 (affecting Q6, Q7, Q8)
        if (question === 'Q3') {
            toggleQ6Q8Visibility();
            addTable('Q6', selectedNames['Q6']);
            addTable('Q7', selectedNames['Q7']);
            addTable('Q8', selectedNames['Q8']);
            // tab3 table change handle
            presentProblem(selectedNames['Q2'],selectedNames['Q3']); 
            updateTabletab3(9,selectedNames['Q6'], 'yes');
            updateTabletab3(10,selectedNames['Q2'], '/');
            updateTabletab3(12,selectedNames['Q7'], 'yes');
            updateTabletab3(13,selectedNames['Q2'], '/');
            updateTabletab3(15,selectedNames['Q8'], 'yes');
            updateTabletab3(16,selectedNames['Q2'], '/');
            // tab4 table change handle
            analysistable(ptoothtotal,dtoothtotal, selectedNames);
    
        }

        // Handle table tab2 creation for Q4-Q8
        if (['Q4', 'Q5', 'Q6', 'Q7', 'Q8'].includes(question)) {
            addTable(question, selectedArray);
        }

        // tab3 table change handle 
        if (question === 'Q4') {
            updateTabletab3(2,selectedNames['Q4'], 'yes');
            tab2totab3("tableQ4", 4, "size");
            tab2totab3("tableQ4", 5, "grade");
            // tab4 table change handel 
            analysistable(ptoothtotal,dtoothtotal, selectedNames);
        }
        
        if (question === 'Q5') {
            updateTabletab3(6,selectedNames['Q5'], 'yes');
            tab2totab3("tableQ5", 8, "grade");
            // tab4 table change handel 
            analysistable(ptoothtotal,dtoothtotal, selectedNames);
        }

        if (question === 'Q6') {
            updateTabletab3(9,selectedNames['Q6'], 'yes');
            tab2totab3("tableQ6", 11, "grade");
            // tab4 table change handel 
            analysistable(ptoothtotal,dtoothtotal, selectedNames);
        }

        if (question === 'Q7') {
            updateTabletab3(12,selectedNames['Q7'], 'yes');
            tab2totab3("tableQ7", 14, "grade");
            // tab4 table change handel 
            analysistable(ptoothtotal,dtoothtotal, selectedNames);
        }

        if (question === 'Q8') {
            updateTabletab3(15,selectedNames['Q8'], 'yes');
            tab2totab3("tableQ8", 17, "grade");
            // tab4 table change handel 
            analysistable(ptoothtotal,dtoothtotal, selectedNames);
        }
        

    }
    
    function toggleQ4Q5Visibility() {
        const q2SelectedLabels = selectedNames.Q2;
        const q4Buttons = document.querySelectorAll('#buttonContainerQ4 .button');
        const q5Buttons = document.querySelectorAll('#buttonContainerQ5 .button');
    
        console.log("Toggling visibility for Q4 and Q5 based on Q2 selection:");
    
        // Toggle visibility for Q4
        q4Buttons.forEach((button) => {
            const correspondingLabel = button.textContent;
            const selectedArrayQ4 = selectedNames.Q4;
    
            console.log(`Checking visibility for Q4 button: ${correspondingLabel}`);
    
            if (q2SelectedLabels.includes(correspondingLabel)) {
                button.style.visibility = 'hidden';
                console.log(`${correspondingLabel} in Q2, hiding button`);
    
                // Remove from Q4 selection if it becomes hidden
                const index = selectedArrayQ4.indexOf(correspondingLabel);
                if (index > -1) {
                    selectedArrayQ4.splice(index, 1);
                    console.log(`${correspondingLabel} removed from Q4 selection`);
                    updateSelectedDisplay('Q4');
                }
            } else {
                button.style.visibility = 'visible';
                console.log(`${correspondingLabel} not in Q2, showing button`);
            }
        });
    
        // Toggle visibility for Q5
        q5Buttons.forEach((button) => {
            const correspondingLabel = button.textContent;
            const selectedArrayQ5 = selectedNames.Q5;
    
            console.log(`Checking visibility for Q5 button: ${correspondingLabel}`);
    
            if (q2SelectedLabels.includes(correspondingLabel)) {
                button.style.visibility = 'hidden';
                console.log(`${correspondingLabel} in Q2, hiding button`);
    
                // Remove from Q5 selection if it becomes hidden
                const index = selectedArrayQ5.indexOf(correspondingLabel);
                if (index > -1) {
                    selectedArrayQ5.splice(index, 1);
                    console.log(`${correspondingLabel} removed from Q5 selection`);
                    updateSelectedDisplay('Q5');
                }
            } else {
                button.style.visibility = 'visible';
                console.log(`${correspondingLabel} not in Q2, showing button`);
            }
        });
    }
    
    function toggleQ6Q8Visibility() {
        const q3SelectedLabels = selectedNames.Q3;
        const q6Buttons = document.querySelectorAll('#buttonContainerQ6 .button');
        const q7Buttons = document.querySelectorAll('#buttonContainerQ7 .button');
        const q8Buttons = document.querySelectorAll('#buttonContainerQ8 .button');
    
        console.log("Toggling visibility for Q6, Q7, Q8 based on Q3 selection:");
    
        // Toggle visibility for Q6
        q6Buttons.forEach((button) => {
            const correspondingLabel = button.textContent;
            const selectedArrayQ6 = selectedNames.Q6;
    
            console.log(`Checking visibility for Q6 button: ${correspondingLabel}`);
    
            if (q3SelectedLabels.includes(correspondingLabel)) {
                button.style.visibility = 'hidden';
                console.log(`${correspondingLabel} in Q3, hiding button`);
    
                // Remove from Q6 selection if it becomes hidden
                const index = selectedArrayQ6.indexOf(correspondingLabel);
                if (index > -1) {
                    selectedArrayQ6.splice(index, 1);
                    console.log(`${correspondingLabel} removed from Q6 selection`);
                    updateSelectedDisplay('Q6');
                }
            } else {
                button.style.visibility = 'visible';
                console.log(`${correspondingLabel} not in Q3, showing button`);
            }
        });
    
        // Toggle visibility for Q7
        q7Buttons.forEach((button) => {
            const correspondingLabel = button.textContent;
            const selectedArrayQ7 = selectedNames.Q7;
    
            console.log(`Checking visibility for Q7 button: ${correspondingLabel}`);
    
            if (q3SelectedLabels.includes(correspondingLabel)) {
                button.style.visibility = 'hidden';
                console.log(`${correspondingLabel} in Q3, hiding button`);
    
                // Remove from Q7 selection if it becomes hidden
                const index = selectedArrayQ7.indexOf(correspondingLabel);
                if (index > -1) {
                    selectedArrayQ7.splice(index, 1);
                    console.log(`${correspondingLabel} removed from Q7 selection`);
                    updateSelectedDisplay('Q7');
                }
            } else {
                button.style.visibility = 'visible';
                console.log(`${correspondingLabel} not in Q3, showing button`);
            }
        });
    
        // Toggle visibility for Q8
        q8Buttons.forEach((button) => {
            const correspondingLabel = button.textContent;
            const selectedArrayQ8 = selectedNames.Q8;
    
            console.log(`Checking visibility for Q8 button: ${correspondingLabel}`);
    
            if (q3SelectedLabels.includes(correspondingLabel)) {
                button.style.visibility = 'hidden';
                console.log(`${correspondingLabel} in Q3, hiding button`);
    
                // Remove from Q8 selection if it becomes hidden
                const index = selectedArrayQ8.indexOf(correspondingLabel);
                if (index > -1) {
                    selectedArrayQ8.splice(index, 1);
                    console.log(`${correspondingLabel} removed from Q8 selection`);
                    updateSelectedDisplay('Q8');
                }
            } else {
                button.style.visibility = 'visible';
                console.log(`${correspondingLabel} not in Q3, showing button`);
            }
        });
    }
    
    function updateSelectedDisplay(question) {
        // Update the selector to use the pattern 'selectedButtons' followed by the question number
        const selectedDisplay = document.querySelector(`#selectedButtons${question}`);
        
        // Check if the element exists before trying to set textContent
        if (selectedDisplay) {
            const selectedArray = selectedNames[question];
            
            // Debugging the selected array
            console.log(`Updating display for ${question}:`, selectedArray);
            
            // Check if array is empty, if so display a default message
            if (selectedArray.length === 0) {
                selectedDisplay.textContent = 'No items selected';
            } else {
                selectedDisplay.textContent = selectedArray.join(' / ');
            }
        } else {
            // Log if the element was not found
            console.log(`Element #selectedButtons${question} not found`);
        }
    }
    
    function addTable(question, selectedArray) {
        const tableId = `table${question}`;
        let table = document.getElementById(tableId);
    
        // If table does not exist, create it
        if (!table) {
            table = document.createElement('table');
            table.id = tableId;
            table.innerHTML = `
                <tr>
                    <th>Names</th>
                    <th>Size</th>
                    <th>Grade</th>
                </tr>
            `;
            document.body.appendChild(table); // Append table to the document (adjust as needed)
        }
    
        // Clear existing rows except the header
        table.innerHTML = `
            <tr>
                <th>Tooth</th>
                <th>Size and location</th>
                <th>Grade</th>
            </tr>
        `;
    
        // Add rows for each selected button
        selectedArray.forEach((name) => {
            const row = document.createElement('tr');
    
            const nameCell = document.createElement('td');
            nameCell.textContent = name;
    
            const sizeCell = document.createElement('td');
            const sizeInput = document.createElement('input');
            sizeInput.type = 'text';
            sizeCell.appendChild(sizeInput);
    
            const gradeCell = document.createElement('td');
            const gradeSelect = document.createElement('select');
            ['/','GradeI', 'GradeII', 'GradeIII'].forEach((grade) => {
                const option = document.createElement('option');
                option.value = grade;
                option.textContent = grade;
                gradeSelect.appendChild(option);
            });
            gradeCell.appendChild(gradeSelect);
    
            row.appendChild(nameCell);
            row.appendChild(sizeCell);
            row.appendChild(gradeCell);
    
            table.appendChild(row);
        });
    }
    
    //tab3 table generation
    function addTabletab3(selectedGroup) {
        headerRow.innerHTML = '<th>Tooth</th>';
        tableBody.innerHTML = '';

        const template = buttonTemplates[selectedGroup];
        if (!template) return;

        template.forEach((col) => {
            if (col !== null) {
                const th = document.createElement('th');
                th.textContent = col;
                headerRow.appendChild(th);
            }
        });

        rowDefinitions.forEach((rowDef) => {
            const tr = document.createElement('tr');

            const rowTitleCell = document.createElement('td');
            rowTitleCell.textContent = rowDef.title;
            tr.appendChild(rowTitleCell);

            template.forEach((col) => {
                if (col !== null) {
                    const td = document.createElement('td');
                    td.textContent = rowDef.fill(col);
                    tr.appendChild(td);
                }
            });

            tableBody.appendChild(tr);
        });
    }

    let previousSelectedNames = {};

    function updateTabletab3(row, selectedNames, replaceContent) {
        console.log(`Updating row ${row} with new content '${replaceContent}' for columns: ${selectedNames.join(', ')}`);
        
        // Get the table and its body
        const table = document.getElementById('tabletab3');
        const tableBody = table.querySelector('#tableBody');
        
        // Get the specific row based on the index
        const tableRow = tableBody.rows[row];
        if (!tableRow) {
            console.log(`Row ${row} not found in table.`);
            return;
        }
        
        console.log(`Row ${row} found:`, tableRow);
        
        // Get the headers to identify columns
        const headerCells = document.querySelectorAll('#headerRow th');
        console.log(`Headers: ${Array.from(headerCells).map(th => th.textContent).join(', ')}`);
        
        // If previousSelectedNames exists for the current row, compare with selectedNames to reset missing columns
        if (previousSelectedNames[row]) {
            previousSelectedNames[row].forEach((prevName) => {
                if (!selectedNames.includes(prevName)) {
                    // Reset content for this column
                    const columnIndex = Array.from(headerCells).findIndex(header => header.textContent === prevName);
                    if (columnIndex !== -1) {
                        const targetCell = tableRow.cells[columnIndex];
                        if (targetCell) {
                            // Find the original value from rowDefinitions (you may need to adjust this part)
                            const originalValue = rowDefinitions[row].fill(prevName);
                            console.log(`Resetting content in column '${prevName}' (row ${row}) to original value: ${originalValue}`);
                            targetCell.textContent = originalValue;
                        }
                    }
                }
            });
        }
    
        // Loop through the selected column names (from selectedNames) and update the corresponding columns
        selectedNames.forEach((selectedName) => {
            console.log(`Looking for column: ${selectedName}`);
            
            // Find the index of the column based on the header name
            const columnIndex = Array.from(headerCells).findIndex(header => header.textContent === selectedName);
            
            if (columnIndex !== -1) {
                console.log(`Column '${selectedName}' found at index ${columnIndex}`);
                
                // Get the corresponding table cell in the specified row and replace its content
                const targetCell = tableRow.cells[columnIndex];
                if (targetCell) {
                    console.log(`Replacing content in cell at row ${row}, column '${selectedName}'`);
                    targetCell.textContent = replaceContent;
                } else {
                    console.log(`Target cell at row ${row}, column ${columnIndex} not found.`);
                }
            } else {
                console.log(`Column '${selectedName}' not found in headers.`);
            }
        });
        
        // Update the previous selected names for the current row
        previousSelectedNames[row] = selectedNames.slice();
        
        // Debug message: show the entire previous selected names for this row
        console.log(`Previous selected names for row ${row}: ${previousSelectedNames[row].join(', ')}`);
        
        console.log(`Row ${row} updated.`);
    }
    
    // present problem function
    function presentProblem(selectedNamesQ2, selectedNamesQ3) {
        // Log input arrays
        console.log("Selected Q2 Names: ", selectedNamesQ2);
        console.log("Selected Q3 Names: ", selectedNamesQ3);
    
        // Get the table and its body
        const table = document.getElementById('tabletab3');
        const tableBody = table.querySelector('#tableBody');
        const tableRow = tableBody.rows[0]; // Row 1 (index 1) will be updated
        
        // Get the headers to identify columns
        const headerCells = document.querySelectorAll('#headerRow th');
        
        // Create lists to hold elements for each update type
        const updateN = []; // Q2 but not in Q3
        const updateL = []; // Q3 but not in Q2
        const updateU = []; // In both Q2 and Q3
        const updateP = []; // Not in Q2 and not in Q3
    
        // Compare elements for Q2 not in Q3, Q3 not in Q2, and in both Q2 and Q3
        selectedNamesQ2.forEach((element) => {
            if (!selectedNamesQ3.includes(element)) {
                // Element is in Q2 but not in Q3
                console.log(`Element '${element}' is in Q2 but not in Q3. Adding to update 'N'`);
                updateN.push(element);
            } else {
                // Element is in both Q2 and Q3
                console.log(`Element '${element}' is in both Q2 and Q3. Adding to update 'U'`);
                updateU.push(element);
            }
        });
    
        selectedNamesQ3.forEach((element) => {
            if (!selectedNamesQ2.includes(element)) {
                // Element is in Q3 but not in Q2
                console.log(`Element '${element}' is in Q3 but not in Q2. Adding to update 'L'`);
                updateL.push(element);
            }
        });
    
        // Find elements that are in neither Q2 nor Q3 (update 'P')
        const allElements = [...selectedNamesQ2, ...selectedNamesQ3];
        const allHeaders = Array.from(headerCells).map(cell => cell.textContent);
        allHeaders.forEach((header, index) => {
            if (!allElements.includes(header) && index !== 0) { // Skip the first column (index 0)
                // If the header name is not in either Q2 or Q3 and it's not the first column, we replace with 'P'
                updateP.push(header);
            }
        });
    
        // Update row 1 content for each group of elements
        function updateRowContent(updateList, updateType) {
            updateList.forEach((element) => {
                const columnIndex = Array.from(headerCells).findIndex(header => header.textContent === element);
                if (columnIndex !== -1 && columnIndex !== 0) { // Avoid updating the first column
                    const targetCell = tableRow.cells[columnIndex];
                    if (targetCell) {
                        console.log(`Updating row 1, column '${element}' with '${updateType}'`);
                        targetCell.textContent = updateType; // Replace with the update type (N, L, U, or P)
                    } else {
                        console.log(`Target cell for column '${element}' not found.`);
                    }
                }
            });
        }
    
        // Update all elements in one go for each type
        if (updateN.length > 0) {
            console.log(`Updating Q2-only elements: ${updateN.join(', ')}`);
            updateRowContent(updateN, 'N');
        }
        if (updateL.length > 0) {
            console.log(`Updating Q3-only elements: ${updateL.join(', ')}`);
            updateRowContent(updateL, 'L');
        }
        if (updateU.length > 0) {
            console.log(`Updating elements in both Q2 and Q3: ${updateU.join(', ')}`);
            updateRowContent(updateU, 'U');
        }
        if (updateP.length > 0) {
            console.log(`Updating elements not in Q2 or Q3: ${updateP.join(', ')}`);
            updateRowContent(updateP, 'P');
        }
    }
          
    // tab2 content to tab3 handle function
    function tab2totab3(tableId, rowNumber, className) {
        const tab2Table = document.getElementById(tableId);
        const tab3Table = document.getElementById("tabletab3");
    
        if (!tab2Table || !tab3Table) {
            console.error("One or both tables are not found.");
            return;
        }
    
        const updateContent = () => {
            const tab2Rows = tab2Table.querySelectorAll("tr");
            const tab3Rows = tab3Table.querySelectorAll("tbody tr");
    
            // Ensure rowNumber is valid
            if (rowNumber < 1 || rowNumber > tab3Rows.length) {
                console.error(`Row number ${rowNumber} is out of range in Tab3.`);
                return;
            }
    
            const selectedRow = tab3Rows[rowNumber - 1];
            if (!selectedRow) {
                console.error(`No row found at row number ${rowNumber} in Tab3.`);
                return;
            }
    
            // Map Tab3 headers to their column indices
            const tab3Headers = Array.from(tab3Table.querySelectorAll("thead th"));
            const tab3HeaderMap = tab3Headers.reduce((map, th, index) => {
                map[th.textContent.trim()] = index;
                return map;
            }, {});
    
            // Iterate through Tab2 rows and update Tab3 accordingly
            tab2Rows.forEach((tab2Row, index) => {
                if (index === 0) return; // Skip header
    
                const tab2Cells = tab2Row.querySelectorAll("td");
                if (tab2Cells.length === 3) {
                    const name = tab2Cells[0].textContent;
                    const inputElement = className === "size" 
                        ? tab2Cells[1].querySelector("input") 
                        : tab2Cells[2].querySelector("select");
    
                    if (!inputElement) return;
    
                    inputElement.addEventListener(className === "size" ? "input" : "change", () => {
                        const value = inputElement.value;
    
                        // Find the corresponding column in Tab3
                        const colIndex = tab3HeaderMap[name];
                        if (colIndex !== undefined) {
                            const targetCell = selectedRow.children[colIndex];
                            if (targetCell) {
                                targetCell.textContent = value;
                                console.log(`Updated Tab3 [Row ${rowNumber}, Column '${name}'] to: ${value}`);
                            }
                        }
                    });
                }
            });
        };
    
        // Initial content update and attach event listeners
        updateContent();
    }
      
    // tab3 table to PDF function
    function exportTableToCSV(tableId, fileName) {
        const table = document.getElementById(tableId);
        if (!table) {
            console.error(`Table with ID '${tableId}' not found.`);
            return;
        }
    
        let csvContent = "";
        const rows = table.querySelectorAll("tr");
    
        rows.forEach((row) => {
            const cells = row.querySelectorAll("th, td");
            const rowContent = Array.from(cells)
                .map((cell) => `"${cell.textContent.trim()}"`) // Wrap each cell content in quotes
                .join(","); // Join cells with commas
            csvContent += rowContent + "\n"; // Add the row and a newline
        });
    
        // Create a Blob with the CSV content
        const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = `${fileName}.csv`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
    
    // Add event listener to the button
    document.getElementById("printButton").addEventListener("click", function () {
        exportTableToCSV("tabletab3", "Tab3_Table");
    });
    
    
    // tab4 data analysis table function
    function analysistable(ptoothtotal,dtoothtotal, selectedNames) {
        
        // Tooth 
        const countQ2 = selectedNames.Q2.length;
        const countDInQ2 = selectedNames.Q2.filter(item => item.includes("D-")).length;
        const countPInQ2 = countQ2 - countDInQ2;
        const Pcount = ptoothtotal - countPInQ2;
        const Pcountpercent = (Pcount / ptoothtotal)*100;
        const Dcount = dtoothtotal - countDInQ2;
        const Dcountpercent = (Dcount / dtoothtotal)*100;
        
        // socket
        const countQ3 = selectedNames.Q3.length;
        const countDInQ3 = selectedNames.Q3.filter(item => item.includes("D-")).length;
        const countPInQ3 = countQ3 - countDInQ3;
        const PAcount = ptoothtotal - countPInQ3;
        const PAcountpercent = (PAcount / ptoothtotal)*100;
        const DAcount = dtoothtotal - countDInQ3;
        const DAcountpercent = (DAcount / dtoothtotal)*100;
        
        // Carries
        const countQ4 = selectedNames.Q4.length;
        const countDInQ4 = selectedNames.Q4.filter(item => item.includes("D-")).length;
        const countPInQ4 = countQ4 - countDInQ4;
        const Pcarrispercent = (countPInQ4/Pcount)*100;
        const Dcarrispercent = (countDInQ4/Dcount)*100;

        //EH
        const countQ5 = selectedNames.Q5.length;
        const countDInQ5 = selectedNames.Q5.filter(item => item.includes("D-")).length;
        const countPInQ5 = countQ5 - countDInQ5;
        const PEHpercent = (countPInQ5/Pcount)*100;
        const DEHpercent = (countDInQ5/Dcount)*100;

        //ABS
        const countQ6 = selectedNames.Q6.length;
        const countDInQ6 = selectedNames.Q6.filter(item => item.includes("D-")).length;
        const countPInQ6 = countQ6 - countDInQ6;
        const PABSpercent = (countPInQ6 / PAcount)*100;
        const DABSpercent = (countDInQ6 / DAcount)*100;
        
        //PER
        const countQ7 = selectedNames.Q7.length;
        const countDInQ7 = selectedNames.Q7.filter(item => item.includes("D-")).length;
        const countPInQ7 = countQ7 - countDInQ7;
        const PPERpercent = (countPInQ7 / PAcount)*100;
        const DPERpercent = (countDInQ7 / DAcount)*100;
        
        //DC
        const countQ8 = selectedNames.Q8.length;
        const countDInQ8 = selectedNames.Q8.filter(item => item.includes("D-")).length;
        const countPInQ8 = countQ8 - countDInQ8;
        const PDCpercent = (countPInQ8 / PAcount)*100;
        const DDCpercent = (countDInQ8 / DAcount)*100;

        
        // Update the table rows with the calculated values
        // Row 1: Preserved Teeth
        document.querySelector('#tabletab4 tbody tr:nth-child(1) td:nth-child(2)').textContent = `${Pcount} (${Pcountpercent.toFixed(2)}% to all)`;
        document.querySelector('#tabletab4 tbody tr:nth-child(1) td:nth-child(3)').textContent = `${Dcount} (${Dcountpercent.toFixed(2)}% to all)`;
    
        // Row 2: Teeth with Carious Lesions (C)
        document.querySelector('#tabletab4 tbody tr:nth-child(2) td:nth-child(2)').textContent = `${countPInQ4} (${Pcarrispercent.toFixed(2)}% to preserved)`;
        document.querySelector('#tabletab4 tbody tr:nth-child(2) td:nth-child(3)').textContent = `${countDInQ4} (${Dcarrispercent.toFixed(2)}% to preserved)`;
    
        // Row 3: Teeth with Enamel Hypoplasia (EH)
        document.querySelector('#tabletab4 tbody tr:nth-child(3) td:nth-child(2)').textContent = `${countPInQ5} (${PEHpercent.toFixed(2)}% to preserved)`;
        document.querySelector('#tabletab4 tbody tr:nth-child(3) td:nth-child(3)').textContent = `${countDInQ5} (${DEHpercent.toFixed(2)}% to preserved)`;
    
        // Row 4: Preserved Alveolar Bone
        document.querySelector('#tabletab4 tbody tr:nth-child(4) td:nth-child(2)').textContent = `${PAcount} (${PAcountpercent.toFixed(2)}% to all)`;
        document.querySelector('#tabletab4 tbody tr:nth-child(4) td:nth-child(3)').textContent = `${DAcount} (${DAcountpercent.toFixed(2)}% to all)`;
    
        // Row 5: Teeth with Periapical Lesions (ABS)
        document.querySelector('#tabletab4 tbody tr:nth-child(5) td:nth-child(2)').textContent = `${countPInQ6} (${PABSpercent.toFixed(2)}% to preserved)`;
        document.querySelector('#tabletab4 tbody tr:nth-child(5) td:nth-child(3)').textContent = `${countDInQ6} (${DABSpercent.toFixed(2)}% to preserved)`;
    
        // Row 6: Teeth with Periapical Periodontal Diseases (PER)
        document.querySelector('#tabletab4 tbody tr:nth-child(6) td:nth-child(2)').textContent = `${countPInQ7} (${PPERpercent.toFixed(2)}% to preserved)`;
        document.querySelector('#tabletab4 tbody tr:nth-child(6) td:nth-child(3)').textContent = `${countDInQ7} (${DPERpercent.toFixed(2)}% to preserved)`;
    
        // Row 7: Teeth with Periapical Dental Calculus (DC)
        document.querySelector('#tabletab4 tbody tr:nth-child(7) td:nth-child(2)').textContent = `${countPInQ8} (${PDCpercent.toFixed(2)}% to preserved)`;
        document.querySelector('#tabletab4 tbody tr:nth-child(7) td:nth-child(3)').textContent = `${countDInQ8} (${DDCpercent.toFixed(2)}% to preserved)`;

    }


    // Event listener for age group radio buttons
    ageGroupRadios.forEach(radio => {
        radio.addEventListener('change', () => {
            const selectedGroup = radio.value;

            // Clear previous selections
            selectedNames.Q2 = [];
            selectedNames.Q3 = [];
            selectedNames.Q4 = [];
            selectedNames.Q5 = [];
            selectedNames.Q6 = [];
            selectedNames.Q7 = [];
            selectedNames.Q8 = [];
            selectedButtonsQ2.textContent = '';
            selectedButtonsQ3.textContent = '';
            selectedButtonsQ4.textContent = '';
            selectedButtonsQ5.textContent = '';
            selectedButtonsQ6.textContent = '';
            selectedButtonsQ7.textContent = '';
            selectedButtonsQ8.textContent = '';
            question2.classList.remove('hidden');
            question3.classList.remove('hidden');
            question4.classList.remove('hidden');
            question5.classList.remove('hidden');
            question6.classList.remove('hidden');
            question7.classList.remove('hidden');
            question8.classList.remove('hidden');
            renderButtons(buttonContainerQ2, selectedGroup, selectedButtonsQ2, 'Q2');
            renderButtons(buttonContainerQ3, selectedGroup, selectedButtonsQ3, 'Q3');
            renderButtons(buttonContainerQ4, selectedGroup, selectedButtonsQ4, 'Q4');
            renderButtons(buttonContainerQ5, selectedGroup, selectedButtonsQ5, 'Q5');
            renderButtons(buttonContainerQ6, selectedGroup, selectedButtonsQ6, 'Q6');
            renderButtons(buttonContainerQ7, selectedGroup, selectedButtonsQ7, 'Q7');
            renderButtons(buttonContainerQ8, selectedGroup, selectedButtonsQ8, 'Q8');
            addTable('Q4', selectedNames['Q4']);
            addTable('Q5', selectedNames['Q5']);
            addTable('Q6', selectedNames['Q6']);
            addTable('Q7', selectedNames['Q7']);
            addTable('Q8', selectedNames['Q8']);
            addTabletab3(selectedGroup);
            console.log(`Selected age group: ${selectedGroup}`);
        });
    });

    // Toggle Navbar visibility
    $('#toggleNavbar').click(function(event) {
      event.preventDefault(); // Prevent default anchor action
      $('.navbar').toggle();
      
      // Toggle the rotation of the arrow
      $('#arrowIcon').toggleClass('rotate');
      
      // Adjust padding for body based on navbar visibility
      if ($('.navbar').is(':visible')) {
        $('body').css('padding-top', '70px');
      } else {
        $('body').css('padding-top', '0');
      }
    });
  </script>
</body>
</html>
